<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Bãnbou</title>
<style>
body{
  margin:0;
  font-family:'Comic Sans MS',sans-serif;
  background:#fffbee;
  overflow:hidden;
}
#app{
  position:relative;
  width:100%;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  position:absolute;
  width:90%;
  max-width:340px;
  height:70%;
  background:#fff;
  border-radius:20px;
  box-shadow:0 5px 15px rgba(0,0,0,0.2);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  transition:transform 0.3s ease,opacity 0.3s ease;
}
.card img{
  width:100%;
  height:100%;
  object-fit:cover;
}
.message-bubble{
  position:absolute;
  bottom:10%;
  left:50%;
  transform:translateX(-50%);
  background:#f0f0f0;
  border-radius:18px;
  padding:12px 18px;
  max-width:80%;
  box-shadow:0 3px 6px rgba(0,0,0,0.1);
  display:none;
}
.message-bubble.show{display:block;}
</style>
</head>
<body>
<div id="app">
  <div class="card" id="kogos"><img src="kogos.jpg" alt="Kogos"></div>
  <div class="card" id="serj"><img src="serj.jpg" alt="Serj Tankian"></div>
  <div class="card" id="joe"><img src="joe.jpg" alt="Joe Duplantier"></div>
  <div class="card" id="tomatinho"><img src="tomatinho.jpg" alt="Tomatinho"></div>
  <div class="message-bubble" id="message">oi, aqui é o <s>careca</s> cabeludo que gosta de gojira e system of a down, me chama no zap <a href="#" style="color:#007bff;text-decoration:none;">91234-5678</a></div>
</div>

<script>
let serjCtx, serjGain, serjSource;
async function prepareSerjAudio() {
  serjCtx = new (window.AudioContext || window.webkitAudioContext)();
  const response = await fetch('serj.mp3');
  const buffer = await response.arrayBuffer();
  const audioBuffer = await serjCtx.decodeAudioData(buffer);
  
  serjSource = serjCtx.createBufferSource();
  serjSource.buffer = audioBuffer;

  serjGain = serjCtx.createGain();
  serjGain.gain.value = 0; // começa mudo

  serjSource.connect(serjGain);
  serjGain.connect(serjCtx.destination);
  serjSource.start(0);

  // fade-in até 0.6
  let current = 0;
  const fade = setInterval(()=>{
    current += 0.05;
    if(current >= 0.6){ current = 0.6; clearInterval(fade); }
    serjGain.gain.value = current;
  },100);
}

const cards = [...document.querySelectorAll('.card')];
let current = 0;
const message = document.getElementById('message');

function swipeCard(){
  if(current === 0){
    cards[0].style.transform='translateX(-120%) rotate(-15deg)';
    cards[0].style.opacity='0';
    setTimeout(()=>cards[0].style.display='none',300);
    // ao sair do Kogos, começa o áudio do Serj
    prepareSerjAudio();
  }
  if(current === 1){
    message.classList.add('show');
  }
  current++;
}

document.body.addEventListener('click',swipeCard);
</script>
</body>
</html>
